# –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞—Ç—å –±–æ–Ω—É—Å—ã (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –∏–ª–∏ –¥–Ω–∏ –ø–æ–¥–ø–∏—Å–∫–∏) –∑–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# Username –±–æ—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
BOT_USERNAME=vpnbot

# –ë–æ–Ω—É—Å —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ MB)
REFERRAL_BONUS_TRAFFIC_MB=50

# –ë–æ–Ω—É—Å–Ω—ã–µ –¥–Ω–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
REFERRAL_BONUS_DAYS=0

# –¢–∏–ø –±–æ–Ω—É—Å–∞: traffic | days | both
REFERRAL_BONUS_TYPE=traffic
```

### –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å `User`:

- `referralCode` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`ref_<telegramId>`)
- `referredBy` - telegramId —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω)
- `referralCount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `referralBonusTrafficBytes` - –±–æ–Ω—É—Å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–≤ –±–∞–π—Ç–∞—Ö)
- `referralBonusDays` - –±–æ–Ω—É—Å–Ω—ã–µ –¥–Ω–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Referral` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `ref_<telegramId>`.

**–ü—Ä–∏–º–µ—Ä:**
- telegramId: `123456789`
- referralCode: `ref_123456789`
- referralLink: `https://t.me/vpnbot?start=ref_123456789`

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –≤ –±–æ—Ç–µ

**–ó–∞–ø—Ä–æ—Å:**
```bash
GET /bot/user/123456789/referral-code
Headers: x-bot-secret: YOUR_BOT_SECRET
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "telegramId": "123456789",
  "referralCode": "ref_123456789",
  "referralLink": "https://t.me/vpnbot?start=ref_123456789",
  "referralCount": 5
}
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ö–æ–≥–¥–∞ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞, –≤ –∫–æ–º–∞–Ω–¥–µ `/start` –±—É–¥–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä:

```
/start ref_123456789
```

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `/auth/bot-register` –ø–µ—Ä–µ–¥–∞–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥:

**–ó–∞–ø—Ä–æ—Å:**
```bash
POST /auth/bot-register
Headers: x-bot-secret: YOUR_BOT_SECRET
Content-Type: application/json

{
  "telegramId": "987654321",
  "username": "newuser",
  "firstName": "New",
  "lastName": "User",
  "referralCode": "ref_123456789"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "accessToken": "...",
  "refreshToken": "...",
  "user": {
    "telegramId": "987654321",
    "referralCode": "ref_987654321",
    "referredBy": "123456789",
    "referralCount": 0
  },
  "vlessAccount": { ... },
  "referral": {
    "success": true
  }
}
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

**–ó–∞–ø—Ä–æ—Å:**
```bash
GET /bot/user/123456789/referrals
Headers: x-bot-secret: YOUR_BOT_SECRET
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "telegramId": "123456789",
    "referralCode": "ref_123456789",
    "referralCount": 5,
    "referralBonusTrafficMB": 250,
    "referralBonusDays": 0
  },
  "stats": {
    "totalReferrals": 5,
    "activeReferrals": 4,
    "totalBonusTrafficMB": 250,
    "totalBonusDays": 0
  },
  "referrals": [
    {
      "referredUser": {
        "telegramId": "987654321",
        "username": "newuser",
        "firstName": "New",
        "subscriptionStatus": "trial"
      },
      "bonusGranted": true,
      "bonusType": "traffic",
      "bonusTrafficMB": 50,
      "bonusDays": 0,
      "createdAt": "2025-10-15T10:00:00.000Z"
    }
  ]
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±–æ—Ç–µ

### Python (aiogram 3.x)

```python
from aiogram import Router, F
from aiogram.filters import CommandStart, CommandObject
from aiogram.types import Message
import aiohttp
import os

router = Router()

BOT_SECRET = os.getenv("BOT_REGISTRATION_SECRET")
API_URL = os.getenv("API_URL", "http://localhost:8080")

async def register_user(telegram_id: int, user_data: dict, referral_code: str = None):
    """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ"""
    async with aiohttp.ClientSession() as session:
        headers = {"x-bot-secret": BOT_SECRET, "Content-Type": "application/json"}
        
        payload = {
            "telegramId": str(telegram_id),
            "username": user_data.get("username"),
            "firstName": user_data.get("first_name"),
            "lastName": user_data.get("last_name"),
            "languageCode": user_data.get("language_code", "en"),
            "isPremium": user_data.get("is_premium", False),
        }
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥, –µ—Å–ª–∏ –µ—Å—Ç—å
        if referral_code:
            payload["referralCode"] = referral_code
        
        async with session.post(f"{API_URL}/auth/bot-register", headers=headers, json=payload) as response:
            if response.status == 200:
                data = await response.json()
                return data
            else:
                error = await response.json()
                raise Exception(f"Registration failed: {error.get('error')}")

async def get_referral_code(telegram_id: int):
    """–ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    async with aiohttp.ClientSession() as session:
        headers = {"x-bot-secret": BOT_SECRET}
        
        async with session.get(f"{API_URL}/bot/user/{telegram_id}/referral-code", headers=headers) as response:
            if response.status == 200:
                return await response.json()
            return None

async def get_referral_stats(telegram_id: int):
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤"""
    async with aiohttp.ClientSession() as session:
        headers = {"x-bot-secret": BOT_SECRET}
        
        async with session.get(f"{API_URL}/bot/user/{telegram_id}/referrals", headers=headers) as response:
            if response.status == 200:
                return await response.json()
            return None

@router.message(CommandStart(deep_link=True))
async def cmd_start_with_referral(message: Message, command: CommandObject):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º"""
    referral_code = command.args  # –ù–∞–ø—Ä–∏–º–µ—Ä: ref_123456789
    
    try:
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º
        user_data = {
            "username": message.from_user.username,
            "first_name": message.from_user.first_name,
            "last_name": message.from_user.last_name,
            "language_code": message.from_user.language_code,
            "is_premium": message.from_user.is_premium,
        }
        
        result = await register_user(message.from_user.id, user_data, referral_code)
        
        if result.get("referral", {}).get("success"):
            await message.answer(
                "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!\n"
                "–í–∞—à —Ä–µ—Ñ–µ—Ä–µ—Ä –ø–æ–ª—É—á–∏–ª –±–æ–Ω—É—Å –∑–∞ –≤–∞—à–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ."
            )
        else:
            await message.answer("üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!")
            
    except Exception as e:
        print(f"Error during registration: {e}")
        await message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

@router.message(CommandStart())
async def cmd_start(message: Message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start –±–µ–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞"""
    try:
        user_data = {
            "username": message.from_user.username,
            "first_name": message.from_user.first_name,
            "last_name": message.from_user.last_name,
            "language_code": message.from_user.language_code,
            "is_premium": message.from_user.is_premium,
        }
        
        await register_user(message.from_user.id, user_data)
        await message.answer("üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!")
        
    except Exception as e:
        print(f"Error during registration: {e}")

@router.message(F.text == "üéÅ –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞")
async def cmd_referral(message: Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É"""
    try:
        data = await get_referral_code(message.from_user.id)
        
        if data:
            await message.answer(
                f"üéÅ –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:\n\n"
                f"{data['referralLink']}\n\n"
                f"üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π: {data['referralCount']}\n\n"
                f"üí° –ó–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–æ–Ω—É—Å!"
            )
    except Exception as e:
        print(f"Error getting referral code: {e}")

@router.message(F.text == "üìä –ú–æ–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã")
async def cmd_referral_stats(message: Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤"""
    try:
        data = await get_referral_stats(message.from_user.id)
        
        if data:
            stats = data['stats']
            user = data['user']
            
            text = (
                f"üìä –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n\n"
                f"üë• –í—Å–µ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤: {stats['totalReferrals']}\n"
                f"‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö: {stats['activeReferrals']}\n"
                f"üéÅ –ü–æ–ª—É—á–µ–Ω–æ –±–æ–Ω—É—Å–æ–≤:\n"
                f"  ‚Ä¢ –¢—Ä–∞—Ñ–∏–∫: {user['referralBonusTrafficMB']} MB\n"
                f"  ‚Ä¢ –î–Ω–∏: {user['referralBonusDays']}\n\n"
            )
            
            if data['referrals']:
                text += "–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã:\n"
                for ref in data['referrals'][:5]:
                    user_info = ref['referredUser']
                    name = user_info['firstName'] or user_info['username'] or '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
                    status_emoji = "‚úÖ" if user_info['subscriptionStatus'] == 'active' else "üîπ"
                    text += f"{status_emoji} {name}\n"
            
            await message.answer(text)
    except Exception as e:
        print(f"Error getting referral stats: {e}")
```

### Node.js (Grammy)

```typescript
import { Bot, Context } from "grammy";
import axios from "axios";

const BOT_SECRET = process.env.BOT_REGISTRATION_SECRET!;
const API_URL = process.env.API_URL || "http://localhost:8080";

interface UserData {
  telegramId: string;
  username?: string;
  firstName?: string;
  lastName?: string;
  languageCode?: string;
  isPremium?: boolean;
  referralCode?: string;
}

async function registerUser(data: UserData) {
  const response = await axios.post(
    `${API_URL}/auth/bot-register`,
    data,
    {
      headers: { "x-bot-secret": BOT_SECRET },
    }
  );
  return response.data;
}

async function getReferralCode(telegramId: number) {
  const response = await axios.get(
    `${API_URL}/bot/user/${telegramId}/referral-code`,
    {
      headers: { "x-bot-secret": BOT_SECRET },
    }
  );
  return response.data;
}

async function getReferralStats(telegramId: number) {
  const response = await axios.get(
    `${API_URL}/bot/user/${telegramId}/referrals`,
    {
      headers: { "x-bot-secret": BOT_SECRET },
    }
  );
  return response.data;
}

const bot = new Bot(process.env.BOT_TOKEN!);

bot.command("start", async (ctx) => {
  const referralCode = ctx.match; // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –∏–∑ deep link
  
  try {
    const result = await registerUser({
      telegramId: ctx.from.id.toString(),
      username: ctx.from.username,
      firstName: ctx.from.first_name,
      lastName: ctx.from.last_name,
      languageCode: ctx.from.language_code,
      isPremium: ctx.from.is_premium,
      referralCode: referralCode || undefined,
    });
    
    if (result.referral?.success) {
      await ctx.reply(
        "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!"
      );
    } else {
      await ctx.reply("üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!");
    }
  } catch (error) {
    console.error("Registration error:", error);
  }
});

bot.hears("üéÅ –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞", async (ctx) => {
  try {
    const data = await getReferralCode(ctx.from.id);
    
    await ctx.reply(
      `üéÅ –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:\n\n` +
      `${data.referralLink}\n\n` +
      `üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π: ${data.referralCount}\n\n` +
      `üí° –ó–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–æ–Ω—É—Å!`
    );
  } catch (error) {
    console.error("Error getting referral code:", error);
  }
});

bot.hears("üìä –ú–æ–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã", async (ctx) => {
  try {
    const data = await getReferralStats(ctx.from.id);
    
    let text = 
      `üìä –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n\n` +
      `üë• –í—Å–µ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤: ${data.stats.totalReferrals}\n` +
      `‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö: ${data.stats.activeReferrals}\n` +
      `üéÅ –ü–æ–ª—É—á–µ–Ω–æ –±–æ–Ω—É—Å–æ–≤:\n` +
      `  ‚Ä¢ –¢—Ä–∞—Ñ–∏–∫: ${data.user.referralBonusTrafficMB} MB\n` +
      `  ‚Ä¢ –î–Ω–∏: ${data.user.referralBonusDays}\n`;
    
    await ctx.reply(text);
  } catch (error) {
    console.error("Error getting referral stats:", error);
  }
});

bot.start();
```

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥?**  
A: –ù–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑?**  
A: –ù–µ—Ç, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

**Q: –ö–∞–∫ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –±–æ–Ω—É—Å—ã?**  
A: –ë–æ–Ω—É—Å—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–æ–Ω—É—Å–æ–≤?**  
A: –î–∞, —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `REFERRAL_BONUS_TRAFFIC_MB`, `REFERRAL_BONUS_DAYS` –∏ `REFERRAL_BONUS_TYPE`.

**Q: –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ —Ä–µ—Ñ–µ—Ä–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω?**  
A: –í –º–æ–¥–µ–ª–∏ `Referral` –µ—Å—Ç—å –ø–æ–ª–µ `isActive`, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ—Ç–∑—ã–≤–∞ –±–æ–Ω—É—Å–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏).

